/*
 * overlay_startup.c
 *
 *  Created on: Mar 11, 2024
 *      Author: micahbly
 *
 *  Routines for starting up f/manager, including show splash screen(s)
 *    Some code here originated in sys.c and other places before being moved here
 *
 */



/*****************************************************************************/
/*                                Includes                                   */
/*****************************************************************************/

// project includes
#include "overlay_startup.h"
#include "app.h"
#include "comm_buffer.h"
#include "debug.h"
#include "file.h"
#include "general.h"
#include "kernel.h"
#include "keyboard.h"
#include "memory.h"
#include "sys.h"
#include "text.h"
#include "strings.h"

// C includes
#include <stdint.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

// F256 includes
#include "f256.h"




/*****************************************************************************/
/*                               Definitions                                 */
/*****************************************************************************/

#define UI_BYTE_SIZE_OF_LOGO				(36*45)		// firebird logo size.
#define UI_BYTE_SIZE_OF_MACHINE_LOGO		(63*7)		// 441b = size of "F256JR" & "F256K" chars + colors (each)
#define UI_BYTE_SIZE_OF_MACHINE_LOGO_LEFT	287
#define UI_BYTE_SIZE_OF_MACHINE_LOGO_RIGHT	140

#define MACHINE_SPLASH_NUM_ROWS			7
#define MACHINE_SPLASH_START_ROW		1	//27
#define MACHINE_SPLASH_BOTTOM_ROW		(MACHINE_SPLASH_START_ROW + 6)
#define MACHINE_SPLASH_TRAVEL_ROWS		(MACHINE_SPLASH_START_ROW - 0)
#define MACHINE_SPLASH_H_SLIDE_DIST		17	// the number of cols that the JR or K extension needs to move in from off-screen right to be lined up behind the F256 chars.

#define MACHINE_SPLASH_WIDTH_LEFT		40
#define MACHINE_SPLASH_START_COL_LEFT	19
#define MACHINE_SPLASH_END_COL_LEFT		(MACHINE_SPLASH_START_COL_LEFT + MACHINE_SPLASH_WIDTH_LEFT)
#define MACHINE_SPLASH_JR_OFFSET		5	// K is 10 chars fewer than JR, so start logo for JR machines 5 chars to left of K start spot (centered)

#define MACHINE_SPLASH_WIDTH_RIGHT		20
#define MACHINE_SPLASH_START_COL_RIGHT	(MACHINE_SPLASH_END_COL_LEFT + 2)
#define MACHINE_SPLASH_END_COL_RIGHT	(MACHINE_SPLASH_START_COL_RIGHT + MACHINE_SPLASH_WIDTH_RIGHT)	// note: this is one too many, but I like the effect :) 


#define LOGO_START_ROW					10
#define LOGO_BOTTOM_ROW					(LOGO_START_ROW + 44)

#define LOGO_WIDTH						36
#define LOGO_START_COL					22
#define LOGO_END_COL					(LOGO_START_COL + (LOGO_WIDTH - 1))

#define INFO_MACHINE_DISPLAY_ROW		56
#define INFO_KERNEL_DISPLAY_ROW			(INFO_MACHINE_DISPLAY_ROW + 1)
#define INFO_FMANAGER_DISPLAY_ROW		(INFO_KERNEL_DISPLAY_ROW + 1)
#define INFO_SUPERBASIC_DISPLAY_ROW		(INFO_FMANAGER_DISPLAY_ROW + 1)




/*****************************************************************************/
/*                           File-scope Variables                            */
/*****************************************************************************/



#pragma data-name ("OVERLAY_STARTUP")

static uint8_t			logo_chars[UI_BYTE_SIZE_OF_LOGO] = 
{
0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0x20,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0xB5, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0xB5,0xB5,0xB5,0xB5, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0xB5, 0xB5,0x20,0x20,0x20, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0xB5, 0x20,0x20,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0xB5,0xB5,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0xB5, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0xB5, 0xB5,0x20,0xB5,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0xB5,0xB5, 0x20,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0xB5,0x20, 0x20,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0xB5,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0xB5,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20, 0x20,0x20,0x20,0x20,
};


#pragma data-name ("OVERLAY_STARTUP")

static uint8_t			logo_attrs[UI_BYTE_SIZE_OF_LOGO] = 
{
0x40,0x10,0x00,0x10,0x00,0xA0,0x00,0x30,0x40,0x00,0x00,0x90,0x40,0x30,0xA0,0x70,
0x00,0x50,0x00,0x00,0x00,0x00,0x70,0xD0,0xE0,0x00,0xC0,0x00,0xA0,0x80,0x00,0x40,
0xD0,0x30,0xD0,0xA0,0x10,0x10,0x00,0x00,0x90,0xA0,0x00,0x00,0x40,0x00,0x30,0x50,
0x90,0x00,0x60,0x00,0x60,0x60,0xC0,0x10,0x00,0x00,0x00,0x60,0x00,0x00,0xB0,0x50,
0x00,0x00,0xC0,0x60,0xB0,0x00,0xD0,0x10,0x90,0x10,0x10,0x80,0x00,0x00,0xC0,0x00,
0x10,0x00,0xD0,0x60,0x00,0x00,0x00,0xD0,0x00,0x10,0xE0,0x70,0xD0,0xC0,0x60,0xA0,
0x40,0x00,0x00,0x00,0x30,0xA0,0x00,0x40,0x70,0x30,0x10,0x10,0x70,0xE0,0x90,0xB0,
0x00,0xC0,0x10,0xE0,0xE0,0x00,0x90,0xE0,0x70,0x40,0x00,0x50,0x00,0x00,0xD0,0x40,
0xC0,0x00,0x00,0x00,0x80,0xC0,0x00,0x10,0x20,0xA0,0x00,0xD0,0x00,0x10,0x20,0x10,
0x20,0x10,0x20,0x90,0xE0,0x00,0x00,0xE0,0x30,0x90,0x00,0x80,0x00,0x70,0x40,0x00,
0x00,0x80,0x80,0x50,0x00,0xE0,0x50,0x00,0xB0,0x60,0x60,0xE0,0x00,0x70,0x70,0x80,
0x00,0x70,0x10,0x40,0x60,0x60,0x40,0x30,0xE0,0x60,0x70,0xC0,0x00,0xD0,0x10,0x00,
0x40,0x30,0x00,0x60,0x00,0x80,0x00,0x00,0x90,0xA0,0x90,0xA0,0x20,0x60,0x60,0xC0,
0xC0,0xE0,0x20,0x70,0x30,0xE0,0x20,0x00,0x80,0x30,0x50,0x70,0x80,0x40,0x60,0x80,
0xA0,0x00,0x80,0x00,0xE0,0xA0,0x00,0x30,0xC0,0x20,0x00,0x50,0x00,0x70,0x00,0xA0,
0x40,0x80,0xD0,0xB0,0x10,0x00,0x30,0x30,0x50,0xD0,0x20,0xB0,0xA0,0x70,0xC0,0xA0,
0x90,0x50,0x50,0x00,0x70,0xE0,0x40,0x10,0x00,0x60,0x90,0x60,0x50,0x80,0x80,0xC0,
0x90,0x60,0x50,0x00,0x30,0x00,0x80,0x00,0x70,0x00,0xA0,0x30,0x30,0xC0,0x30,0xB0,
0x00,0x40,0xD0,0xC0,0x40,0x50,0x10,0x60,0x70,0x20,0x60,0xE0,0xE0,0x60,0x80,0x40,
0x80,0x90,0x70,0xA0,0x70,0x10,0x10,0x60,0x10,0xB0,0xA0,0x50,0x20,0x70,0x20,0x40,
0x10,0x40,0x60,0x00,0xB0,0x50,0xE0,0x50,0xD0,0x50,0x60,0x60,0x60,0x10,0x90,0xD0,
0x60,0xC0,0xB0,0x80,0x80,0x70,0xD0,0x60,0x40,0x30,0x00,0x70,0x60,0xB0,0x60,0x40,
0x30,0x10,0x90,0x50,0xE0,0x20,0xA0,0x20,0x30,0x50,0x50,0x90,0x10,0x60,0x60,0x20,
0xB0,0x10,0x50,0x20,0x00,0x20,0xA0,0x30,0x10,0x00,0x70,0xC0,0xE0,0xA0,0x00,0x70,
0x70,0x20,0x20,0x60,0x20,0x90,0xE0,0x30,0x50,0x40,0x40,0x00,0x00,0x40,0x80,0xE0,
0x80,0x20,0x60,0x60,0x70,0x40,0x80,0x80,0x90,0xC0,0x50,0x00,0xD0,0x10,0xD0,0x80,
0x90,0xA0,0xC0,0x80,0x80,0x70,0x40,0x60,0x60,0xC0,0xA0,0x50,0x10,0x90,0x00,0x00,
0x10,0x20,0x90,0x50,0x60,0x60,0xB0,0x80,0x70,0x80,0x90,0x80,0x80,0x10,0xA0,0xC0,
0x70,0x00,0xD0,0x00,0x00,0x60,0xD0,0x40,0x80,0x80,0x70,0x60,0x60,0x50,0x60,0xA0,
0xA0,0x00,0x70,0x00,0x00,0x20,0x00,0xC0,0x60,0x80,0xA0,0x70,0x90,0x90,0x40,0x90,
0x90,0xA0,0x50,0x00,0x80,0x00,0xB0,0x70,0x00,0xE0,0x40,0x40,0x80,0xA0,0x80,0x50,
0xE0,0xE0,0xE0,0x10,0xB0,0x00,0x60,0x00,0x70,0x00,0x40,0x00,0x80,0x10,0x90,0x90,
0xE0,0xA0,0x90,0xC0,0xD0,0x30,0xC0,0x90,0xC0,0x70,0xC0,0xB0,0x00,0xB0,0xA0,0x20,
0x50,0x90,0x20,0x70,0x30,0xB0,0x60,0x10,0x20,0xC0,0x50,0x00,0x20,0x80,0x00,0x50,
0x40,0x30,0x70,0xA0,0x80,0xA0,0x90,0x30,0xA0,0xB0,0xC0,0x00,0xD0,0x90,0xD0,0x20,
0x40,0xB0,0x10,0xA0,0xC0,0xA0,0x60,0xC0,0x80,0x60,0x60,0x70,0x00,0x00,0x00,0x00,
0x00,0x70,0x00,0x30,0x60,0x80,0x80,0x00,0x80,0x10,0x90,0x60,0xC0,0xC0,0x80,0xD0,
0xD0,0xD0,0x90,0xA0,0x90,0x70,0xC0,0xD0,0xA0,0x40,0x80,0x80,0xB0,0xC0,0x20,0xD0,
0x50,0x20,0x40,0x90,0x70,0x00,0x00,0x60,0x60,0x50,0x90,0xD0,0x30,0xD0,0x80,0x50,
0x60,0xD0,0xD0,0xC0,0xB0,0xE0,0x50,0xC0,0xB0,0xE0,0x20,0xB0,0x70,0xA0,0x90,0x20,
0xA0,0xE0,0xD0,0x60,0xA0,0x00,0x90,0x70,0x00,0x00,0x20,0xE0,0x10,0xA0,0xD0,0x30,
0x20,0x80,0x30,0xB0,0xC0,0x40,0x30,0xE0,0x70,0x20,0x70,0xE0,0x30,0xD0,0xC0,0x10,
0x90,0x70,0x40,0x00,0x00,0xE0,0x60,0x10,0xC0,0x30,0x40,0xD0,0x00,0x00,0x10,0x70,
0x60,0x70,0xE0,0x60,0x00,0x00,0x00,0xB0,0x10,0xD0,0x70,0x90,0xE0,0x20,0x20,0x10,
0xD0,0x50,0x40,0x50,0x90,0x40,0x20,0x90,0x60,0x00,0x70,0x60,0x10,0xD0,0x10,0x60,
0xD0,0x00,0x20,0x20,0xC0,0xC0,0x00,0x10,0x00,0x00,0x30,0x00,0xC0,0xD0,0xD0,0x70,
0xA0,0x10,0xE0,0xE0,0x30,0x40,0xD0,0xB0,0xA0,0x00,0x90,0x00,0x00,0x70,0xB0,0x60,
0x20,0x80,0x80,0x00,0x00,0x00,0x00,0x60,0xA0,0x40,0xA0,0x50,0x00,0x40,0x20,0x20,
0x00,0x40,0x50,0x00,0xE0,0xB0,0xA0,0xC0,0x60,0xC0,0x00,0xA0,0x70,0x00,0xE0,0xB0,
0x10,0x60,0x70,0x40,0x00,0x70,0x60,0x60,0x00,0x50,0x40,0x60,0x90,0x70,0x60,0x00,
0xB0,0xA0,0x30,0x20,0x40,0x20,0x80,0x00,0x20,0xD0,0xD0,0xD0,0x60,0x00,0xC0,0x70,
0x30,0x90,0xA0,0x30,0xC0,0x00,0x40,0x20,0xB0,0xB0,0xA0,0x70,0x20,0x80,0x20,0x60,
0x70,0x20,0x50,0xC0,0x30,0x00,0x70,0x70,0x00,0x80,0xE0,0x00,0xC0,0xD0,0xD0,0x80,
0x00,0xE0,0x70,0x60,0xA0,0x00,0x20,0x00,0x10,0x60,0x70,0x60,0xC0,0xD0,0x00,0x20,
0x30,0xE0,0x40,0x60,0x70,0x20,0x80,0x30,0x70,0x00,0x80,0x00,0xE0,0x00,0x00,0x60,
0xD0,0xC0,0x70,0x00,0xD0,0xB0,0x80,0x00,0x90,0xB0,0x00,0xC0,0x40,0x20,0x50,0x60,
0x60,0x00,0x20,0x80,0xC0,0x50,0x30,0xC0,0xD0,0xB0,0x30,0x80,0x40,0x00,0x00,0x90,
0x00,0x10,0x90,0xA0,0xC0,0x80,0xC0,0xC0,0x00,0x40,0x60,0x00,0xD0,0x50,0x20,0xC0,
0x00,0x70,0x90,0x60,0xB0,0x50,0x00,0x00,0xB0,0x00,0x00,0x00,0x30,0x40,0xC0,0x70,
0x40,0xD0,0x00,0x00,0x00,0x00,0x00,0xB0,0x90,0xB0,0xA0,0x90,0x10,0xE0,0x40,0x00,
0x00,0x00,0x00,0x00,0x00,0x70,0x10,0x80,0x60,0x00,0x90,0xE0,0x00,0x00,0x60,0x40,
0x90,0x70,0x40,0x00,0xD0,0x00,0xB0,0x00,0x00,0x30,0xD0,0x20,0x60,0xB0,0xB0,0xD0,
0xB0,0xA0,0x20,0xD0,0x00,0x80,0x00,0x40,0x90,0x70,0x60,0x00,0x00,0x20,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x90,0xD0,0x30,0xC0,0x00,0x90,0x50,0x20,0x60,0xC0,0x90,
0xA0,0x70,0x90,0xA0,0xA0,0x80,0x20,0x70,0xC0,0x00,0xA0,0x00,0x60,0xA0,0xD0,0x00,
0x80,0x00,0xE0,0x90,0x30,0x00,0x20,0xA0,0x50,0xD0,0xE0,0x80,0xA0,0x00,0x80,0x30,
0x20,0x60,0x10,0xD0,0x40,0x10,0x10,0x50,0xC0,0x30,0x80,0x80,0xC0,0x00,0x80,0x70,
0xB0,0x40,0x50,0x60,0x00,0x80,0x50,0xB0,0x00,0x00,0x10,0x00,0x30,0x70,0x70,0x70,
0x80,0x60,0x00,0x00,0x00,0xE0,0x00,0xD0,0xB0,0x80,0x80,0x20,0x90,0x20,0x30,0x80,
0x00,0x50,0x50,0xC0,0x60,0x20,0x00,0x30,0xB0,0xB0,0xE0,0x00,0x80,0x80,0xD0,0x00,
0x80,0x80,0x00,0x60,0xB0,0x70,0x30,0x00,0x00,0xE0,0x00,0x20,0x90,0x10,0x10,0x80,
0xC0,0x40,0x80,0x00,0x00,0xC0,0x90,0x60,0x20,0x50,0xE0,0x50,0x70,0xA0,0x20,0x40,
0x70,0xB0,0xB0,0x70,0x00,0xC0,0x20,0x60,0x60,0xA0,0x20,0x70,0x00,0x00,0x30,0x00,
0x40,0x70,0x80,0x80,0x10,0xD0,0xB0,0xC0,0x60,0x20,0x20,0x00,0x00,0x90,0x50,0x30,
0xC0,0x50,0x00,0xC0,0x20,0x00,0x70,0x00,0x00,0xB0,0xD0,0xA0,0x60,0x80,0x60,0x60,
0x70,0xD0,0x50,0x50,0x70,0x90,0x70,0x30,0x40,0x70,0x20,0xD0,0xC0,0x70,0xE0,0x00,
0xB0,0xA0,0x50,0x40,0x00,0x30,0x00,0x00,0xD0,0x00,0xD0,0x70,0x50,0x80,0x00,0xE0,
0x40,0x00,0x70,0xD0,0xB0,0x10,0x70,0xC0,0xE0,0x70,0xB0,0x20,0xC0,0xA0,0xB0,0x00,
0x30,0x50,0x10,0xB0,0x00,0xB0,0x00,0x00,0x30,0x60,0x00,0x30,0x90,0x00,0x70,0x70,
0x70,0x00,0x80,0x50,0x20,0x70,0x40,0x00,0xC0,0x70,0x70,0x30,0xD0,0x60,0x60,0x40,
0x10,0xD0,0x60,0xA0,0x80,0xA0,0x50,0x80,0x00,0xB0,0x00,0x00,0x40,0x00,0xC0,0x90,
0x40,0xA0,0x00,0x90,0x60,0xB0,0x80,0x70,0xB0,0xD0,0xB0,0x90,0x70,0x00,0x90,0x10,
0x50,0xD0,0x50,0x30,0x90,0xA0,0x00,0xB0,0x10,0x00,0x30,0x20,0x40,0x20,0x00,0xD0,
0x90,0x00,0xD0,0xC0,0x00,0x40,0x90,0xC0,0xC0,0x20,0x00,0x20,0x00,0x80,0xA0,0xA0,
0x40,0xE0,0x70,0x50,0x50,0x30,0x50,0x00,0x10,0x70,0x10,0xA0,0x30,0x00,0x90,0x70,
0x30,0x00,0x00,0x00,0x00,0x10,0x00,0xC0,0x60,0xB0,0x50,0xA0,0xE0,0x40,0x40,0x00,
0x80,0x40,0x40,0x30,0x00,0x20,0xA0,0x60,0x00,0x80,0x20,0x40,0x00,0x40,0x30,0x00,
0x60,0xE0,0x00,0x50,0x90,0x60,0x90,0x80,0x80,0xB0,0xD0,0x70,0x70,0xE0,0x00,0x60,
0x70,0x50,0x40,0x40,0x00,0x00,0x00,0x00,0x30,0x40,0x50,0x80,0x30,0x30,0x10,0x10,
0x90,0x00,0xC0,0x50,0x70,0x10,0xD0,0x00,0xE0,0x10,0xB0,0x00,0x70,0x90,0x00,0x40,
0x10,0xB0,0x60,0x30,0x00,0xB0,0x00,0xE0,0x00,0x00,0x60,0x70,0x20,0x20,0xE0,0x50,
0x00,0x90,0x80,0xC0,0x60,0x30,0x00,0x00,0x00,0x00,0x80,0x90,0x00,0x00,0xC0,0xC0,
0x50,0x10,0x80,0x50,0x10,0x30,0xD0,0xB0,0x50,0x00,0x60,0xB0,0x00,0x00,0x30,0x90,
0x20,0x30,0xC0,0x00,0x00,0xD0,0x00,0x50,0x70,0x50,0x00,0xB0,0x60,0xB0,0x60,0x00,
0xB0,0x00,0x70,0xC0,0x40,0x80,0x00,0x20,0xD0,0x50,0x50,0x00,0xD0,0x00,0x00,0x50,
0x00,0x90,0xD0,0xD0,0x10,0xB0,0x20,0x00,0xE0,0x00,0x50,0x00,0xD0,0x60,0x50,0x20,
0x60,0x00,0x90,0xC0,0xB0,0x00,0xC0,0xE0,0x00,0x30,0xD0,0x50,0xD0,0x80,0x00,0x00,
0x00,0x40,0x80,0x30,0x40,0x00,0x90,0x40,0xB0,0x60,0x00,0x00,0xB0,0x40,0xE0,0x10,
0x00,0x80,0x70,0x10,0xE0,0x00,0xB0,0x60,0xE0,0x00,0x50,0xE0,0x70,0x00,0x90,0x00,
0x00,0x80,0xB0,0x30,0x40,0x80,0x00,0x00,0x00,0x00,0xA0,0x00,0x10,0x40,0x70,0x00,
0x00,0x00,0x10,0xD0,0x00,0x30,0x20,0x00,0xA0,0xB0,0x30,0x50,0x20,0x00,0x00,0xE0,
0xC0,0x50,0x00,0xB0,
};

#pragma data-name ("OVERLAY_STARTUP")

// F256JR header line eraser: 1 rows x 63 chars wroth of black on black attributes
static uint8_t			machine_splash_black_line[63] = 
{
	0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,
};

#pragma data-name ("OVERLAY_STARTUP")

// F256 (only) chars. 7 rows x 41 chars=284b. 08=nearly solid block
static uint8_t			machine_splash_chars_left[UI_BYTE_SIZE_OF_MACHINE_LOGO_LEFT] = 
{
0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,
0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,
0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,
0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,
0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,
0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,
};

// F256 (only) colors. 7 rows x 41 chars=284b.
static uint8_t			machine_splash_attrs_left[UI_BYTE_SIZE_OF_MACHINE_LOGO_LEFT] = 
{
0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x00,0x00,0x00,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x00,0x00,0x00,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x00,0x00,0x00,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x00,
0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x00,0x00,0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x06,0x06,
0x0E,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0E,0x0E,0x00,0x00,0x0E,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0E,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x03,0x03,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x00,
0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x07,0x00,0x00,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x07,0x07,
0x0A,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0A,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0A,0x0A,0x00,0x00,0x00,0x00,0x00,0x0A,0x0A,0x00,0x00,0x0A,0x0A,0x00,0x00,0x00,0x00,0x00,0x0A,0x0A,
0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,
};

// JR (only) chars. 7 rows x 20 chars=140b. FC=heart
static uint8_t			machine_splash_chars_jr[UI_BYTE_SIZE_OF_MACHINE_LOGO_RIGHT] = 
{
0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,0x20,0x20,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0x20,
0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,
0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,
0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,0x20,0x20,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0x20,
0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0xFC,0xFC,0x20,0x20,
0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0x20,0xFC,0xFC,0x20,
0x20,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0x20,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0xFC,0xFC,
};

// K (only) chars. 7 rows x 20 chars=140b. B4=circle
static uint8_t			machine_splash_chars_k[UI_BYTE_SIZE_OF_MACHINE_LOGO_RIGHT] = 
{
0xB4,0xB4,0x20,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
0xB4,0xB4,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
0xB4,0xB4,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
0xB4,0xB4,0xB4,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
0xB4,0xB4,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
0xB4,0xB4,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
0xB4,0xB4,0x20,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
};

// JR (only) colors: 7 rows x 20 chars=140b.
static uint8_t			machine_splash_attrs_jr[UI_BYTE_SIZE_OF_MACHINE_LOGO_RIGHT] = 
{
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0x00,
0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,
0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,
0x00,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,
};

// K (only) colors. 7 rows x 20 chars=140b. B4=circle
static uint8_t			machine_splash_attrs_k[UI_BYTE_SIZE_OF_MACHINE_LOGO_RIGHT] = 
{
0xF0,0xF0,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xF0,0xF0,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xF0,0xF0,0xF0,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xF0,0xF0,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xF0,0xF0,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

// // F256JR header chars. 7 rows x 63 chars=441b. 08=nearly solid block, FC=heart
// static uint8_t			machine_splash_chars_jr[UI_BYTE_SIZE_OF_MACHINE_LOGO] = 
// {
// 0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,0x20,0x20,0xF6,0xF6,0xF6,0xF6,0xF6,0xF6,0xF6,0xF6,0x20,
// 0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,0x20,0x20,0xF6,0xF6,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,
// 0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,0x20,0x20,0xF6,0xF6,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,
// 0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,0x20,0x20,0xF6,0xF6,0xF6,0xF6,0xF6,0xF6,0xF6,0xF6,0x20,
// 0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0xF6,0xF6,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,0x20,0x20,0xF6,0xF6,0x20,0x20,0x20,0xF6,0xF6,0x20,0x20,
// 0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0xF6,0xF6,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,0x20,0x20,0xF6,0xF6,0x20,0x20,0x20,0x20,0xF6,0xF6,0x20,
// 0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0xF6,0xF6,0xF6,0xF6,0xF6,0xF6,0xF6,0x20,0x20,0x20,0xF6,0xF6,0x20,0x20,0x20,0x20,0x20,0xF6,0xF6,
// };
// 
// #pragma data-name ("OVERLAY_STARTUP")
// 
// // F256K header. 7 rows x 63 chars
// static uint8_t			machine_splash_chars_k[UI_BYTE_SIZE_OF_MACHINE_LOGO] = 
// {
// 0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,
// 0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
// 0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
// 0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0xB4,0xB4,0xB4,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
// 0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0xB4,0xB4,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
// 0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
// 0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0x20,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0xB4,0xB4,0x20,0x20,0x20,0x20,0x20,0x20,
// };
// 
// #pragma data-name ("OVERLAY_STARTUP")
// 
// // F256JR and K colors:.7 rows x 63 chars
// static uint8_t			machine_splash_attrs[UI_BYTE_SIZE_OF_MACHINE_LOGO] = 
// {
// 13,13,13,13,13,13,13,13,0x00,0x00,0x00,13,13,13,13,13,13,13,0x00,0x00,0x00,13,13,13,13,13,13,13,13,13,0x00,0x00,0x00,13,13,13,13,13,13,13,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,0x00,0x00,0xD0,0xD0,0xD0,0xD0,0xD0,0xD0,0xD0,0xD0,0x00,
// 6,6,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,6,6,0x00,0x00,0x00,0x00,0x00,6,6,0x00,0x00,6,6,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,6,6,0x00,0x00,0x00,0x00,0x00,6,6,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,0x00,0x00,0xD0,0xD0,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,
// 14,14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,14,14,0x00,0x00,14,14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,14,14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,0x00,0x00,0xD0,0xD0,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,
// 3,3,3,3,3,3,0x00,0x00,0x00,0x00,0x00,3,3,3,3,3,3,3,0x00,0x00,0x00,3,3,3,3,3,3,3,3,0x00,0x00,0x00,3,3,3,3,3,3,3,3,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,0x00,0x00,0xD0,0xD0,0xD0,0xD0,0xD0,0xD0,0xD0,0xD0,0x00,
// 7,7,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,7,7,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,7,7,0x00,0x00,7,7,0x00,0x00,0x00,0x00,0x00,7,7,0x00,0x00,0xD0,0xD0,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,0x00,0x00,0xD0,0xD0,0x00,0x00,0x00,0xD0,0xD0,0x00,0x00,
// 10,10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,10,10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,10,10,0x00,0x00,0x00,0x00,0x00,10,10,0x00,0x00,10,10,0x00,0x00,0x00,0x00,0x00,10,10,0x00,0x00,0xD0,0xD0,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,0x00,0x00,0xD0,0xD0,0x00,0x00,0x00,0x00,0xD0,0xD0,0x00,
// 4,4,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,4,4,4,4,4,4,4,4,4,0x00,0x00,0x00,4,4,4,4,4,4,4,0x00,0x00,0x00,0x00,4,4,4,4,4,4,4,0x00,0x00,0x00,0x00,0xD0,0xD0,0xD0,0xD0,0xD0,0xD0,0xD0,0x00,0x00,0x00,0xD0,0xD0,0x00,0x00,0x00,0x00,0x00,0xD0,0xD0,
// };

#pragma data-name ("OVERLAY_STARTUP")

// F256JR/K colors, used for both fore- and background colors in Text mode
// in C256 & F256, these are 8 bit values; in A2560s, they are 32 bit values, and endianness matters
static uint8_t logo_color_lut[64] = 
{
	0x00,0x00,0x00,0x00,

	0x00,0x00,0x60,0x00,
	0x00,0x00,0x70,0x00,
	0x00,0x00,0x80,0x00,
	0x00,0x00,0xA0,0x00,
	0x00,0x00,0xB0,0x00,
	0x00,0x00,0xC0,0x00,
	0x00,0x00,0xE0,0x00,
	0x00,0x00,0xFF,0x00,
	0x00,0x22,0xFF,0x00,
	0x00,0x44,0xFF,0x00,
	0x00,0x66,0xFF,0x00,
	0x00,0x99,0xFF,0x00,
	0x00,0xCC,0xFF,0x00,
	0x00,0xFF,0xFF,0x00,

	0xFF,0xFF,0xFF,0x00,

// v3 palette: dark red to bright red to bright yellow
// 	0x00,0x00,0x00,0x00,
// 
// 	0x00,0x00,0x20,0x00,
// 	0x00,0x00,0x40,0x00,
// 	0x00,0x00,0x60,0x00,
// 	0x00,0x00,0x80,0x00,
// 	0x00,0x00,0xA0,0x00,
// 	0x00,0x00,0xC0,0x00,
// 	0x00,0x00,0xE0,0x00,
// 	0x00,0x00,0xFF,0x00,
// 	0x00,0x22,0xFF,0x00,
// 	0x00,0x44,0xFF,0x00,
// 	0x00,0x66,0xFF,0x00,
// 	0x00,0x99,0xFF,0x00,
// 	0x00,0xCC,0xFF,0x00,
// 	0x00,0xFF,0xFF,0x00,
// 
// 	0xFF,0xFF,0xFF,0x00,

// v2 palette: in order, but pretty subdued colors. top color bright yellow
// 	0x00,0x00,0x00,0x00,
// 	0x00,0x03,0x42,0x00,
// 	0x0F,0x24,0x41,0x00,
// 	0x1C,0x30,0x57,0x00,
// 	0x15,0x32,0x7C,0x00,
// 	0x1D,0x4F,0x8B,0x00,
// 	0x19,0x3C,0xA2,0x00,
// 	0x15,0x2B,0xC6,0x00,
// 	0x29,0x62,0xA9,0x00,
// 	0x29,0x89,0xC6,0x00,
// 	0x3B,0x96,0xED,0x00,
// 	0x69,0x69,0xF5,0x00,
// 	0x46,0x6B,0xF9,0x00,
// 	0x4C,0x57,0xFD,0x00,
// 	0x1A,0x38,0xFC,0x00,
// 	0x38,0xFC,0xFF,0x00,

// v1 palette:
// 	0x00,0x00,0x00,0x00,
// 	0x00,0x03,0x42,0x00,
// 	0x15,0x32,0x7C,0x00,
// 	0x19,0x3C,0xA2,0x00,
// 	0x15,0x2B,0xC6,0x00,
// 	0x1A,0x38,0xFC,0x00,
// 	0x28,0x56,0xED,0x00,
// 	0x0F,0x24,0x41,0x00,
// 	0x18,0x45,0x56,0x00,
// 	0x1D,0x4F,0x8B,0x00,
// 	0x29,0x62,0xA9,0x00,
// 	0x29,0x89,0xC6,0x00,
// 	0x2C,0x72,0xF1,0x00,
// 	0x3B,0x96,0xED,0x00,
// 	0x2E,0xAE,0xF4,0x00,
// 	0x5F,0xC9,0xEA,0x00,
};



/*****************************************************************************/
/*                             Global Variables                              */
/*****************************************************************************/

extern System*			global_system;

extern TextDialogTemplate	global_dlg;	// dialog we'll configure and re-use for different purposes
extern char					global_dlg_title[36];	// arbitrary
extern char					global_dlg_body_msg[70];	// arbitrary
extern char					global_dlg_button[3][10];	// arbitrary


extern char*				global_named_app_basic;
extern bool					global_started_from_flash;		// tracks whether app started from flash or from disk

extern char*				global_string[NUM_STRINGS];
extern char*				global_string_buff1;
extern char*				global_string_buff2;

extern uint8_t				zp_bank_num;
extern uint8_t				io_bank_value_kernel;	// stores value for the physical bank pointing to C000-DFFF whenever we change it, so we can restore it.

#pragma zpsym ("zp_bank_num");


/*****************************************************************************/
/*                       Private Function Prototypes                         */
/*****************************************************************************/

// display machine info: F256JR or F256K
void Startup_ShowMachineSplash(void);

// Set logo palette, display Foenix logo on screen, display basic about info
// does NOT clear the screen first
void Startup_ShowFoenixLogo(void);

// display information about f/manager, the machine, and the MicroKernel
void Startup_ShowAboutInfo(void);


/*****************************************************************************/
/*                       Private Function Definitions                        */
/*****************************************************************************/

// display machine info: F256JR or F256K
void Startup_ShowMachineSplash(void)
{
	uint8_t*	machine_splash_chars_right;
	uint8_t*	machine_splash_attrs_right;
	uint8_t*	this_splash_char;
	uint8_t		h_scooch_dist;
	uint8_t		left_x1;
	uint8_t		left_x2;
	uint8_t		right_x1;
	uint8_t		right_x2;
	int8_t		i;
	uint16_t	k;

	if (global_system->model_number_ == MACHINE_F256JR)
	{
		machine_splash_chars_right = &machine_splash_chars_jr[0];
		machine_splash_attrs_right = &machine_splash_attrs_jr[0];
		h_scooch_dist = 12;
	}
	else if (global_system->model_number_ == MACHINE_F256K)
	{
		machine_splash_chars_right = &machine_splash_chars_k[0];
		machine_splash_attrs_right = &machine_splash_attrs_k[0];
		h_scooch_dist = 05;
	}
	else
	{
		machine_splash_chars_right = &machine_splash_chars_jr[0];
		machine_splash_attrs_right = &machine_splash_attrs_jr[0];
	}
	
	// show core machine logo ("F256" part without K or J)
	left_x1 = MACHINE_SPLASH_START_COL_LEFT;
	left_x2 = MACHINE_SPLASH_END_COL_LEFT;
	Text_CopyMemBoxLinearBuffer(machine_splash_chars_left, left_x1, MACHINE_SPLASH_START_ROW, left_x2, MACHINE_SPLASH_BOTTOM_ROW, PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_CHAR);
	Text_CopyMemBoxLinearBuffer(machine_splash_attrs_left, left_x1, MACHINE_SPLASH_START_ROW, left_x2, MACHINE_SPLASH_BOTTOM_ROW, PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);
	General_DelayTicks(14000); // we want to show the thinnest version for a longer period of time
	
	// give user a chance to drop into BASIC immediately
	if (Keyboard_GetKeyIfPressed() == 'b')
	{
		Kernal_RunNamed(global_named_app_basic, 5);
	}

	// rotate through a series of increasingly fat chars for a reverse louver effect
	for (i=0; i < 6; i++)
	{		
		General_DelayTicks(700);

		this_splash_char = machine_splash_chars_left;
		
		for (k=0; k < UI_BYTE_SIZE_OF_MACHINE_LOGO_LEFT; k++)
		{
			*this_splash_char = *this_splash_char + 1;
			++this_splash_char;
		}

		Text_CopyMemBoxLinearBuffer(machine_splash_chars_left, left_x1, MACHINE_SPLASH_START_ROW, left_x2, MACHINE_SPLASH_BOTTOM_ROW, PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_CHAR);
	}
	
	// give user a chance to drop into BASIC immediately
	if (Keyboard_GetKeyIfPressed() == 'b')
	{
		Kernal_RunNamed(global_named_app_basic, 5);
	}
	
	General_DelayTicks(600);

// 	// bring the logo up from center of screen to top of screen, out of the way of the foenix logo
// 	for (i=0; i < MACHINE_SPLASH_TRAVEL_ROWS; i++)
// 	{		
// 		Text_CopyMemBoxLinearBuffer((uint8_t*)&machine_splash_black_line, left_x1, (MACHINE_SPLASH_START_ROW+7)-i, left_x2, (MACHINE_SPLASH_START_ROW+7)-i, PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);
// 		Text_CopyMemBoxLinearBuffer(machine_splash_chars_left, left_x1, MACHINE_SPLASH_START_ROW-i, left_x2, MACHINE_SPLASH_BOTTOM_ROW-i, PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_CHAR);
// 		Text_CopyMemBoxLinearBuffer(machine_splash_attrs_left, left_x1, MACHINE_SPLASH_START_ROW-i, left_x2, MACHINE_SPLASH_BOTTOM_ROW-i, PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);
// 		
// 		General_DelayTicks(200);
// 	}
// 	
// 	General_DelayTicks(900);

	// slide in the JR or K part of logo, from right
	right_x1 = 79;
	right_x2 = right_x1 + MACHINE_SPLASH_WIDTH_RIGHT - 1;
	
	for (i=0; i < MACHINE_SPLASH_H_SLIDE_DIST; i++)
	{
		Text_CopyMemBoxLinearBuffer(machine_splash_chars_right, 
			right_x1, 1, 
			right_x2, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_CHAR);
			
		Text_CopyMemBoxLinearBuffer(machine_splash_attrs_right, 
			right_x1, 1, 
			right_x2, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);

		Text_CopyMemBoxLinearBuffer((uint8_t*)&machine_splash_black_line, 
			right_x2+1, 1, 
			right_x2+1, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);
		
		--right_x1;
		--right_x2;
		
		General_DelayTicks(225);		
	}
	
	// slide the main logo and machine extension to the left to recenter.
	for (i=0; i < h_scooch_dist; i++)
	{
		Text_CopyMemBoxLinearBuffer(machine_splash_chars_left, 
			left_x1, 1, 
			left_x2, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_CHAR);
			
		Text_CopyMemBoxLinearBuffer(machine_splash_attrs_left, 
			left_x1, 1, 
			left_x2, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);

		Text_CopyMemBoxLinearBuffer((uint8_t*)&machine_splash_black_line, 
			left_x2+1, 1, 
			left_x2+1, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);

		Text_CopyMemBoxLinearBuffer(machine_splash_chars_right, 
			right_x1, 1, 
			right_x2, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_CHAR);
			
		Text_CopyMemBoxLinearBuffer(machine_splash_attrs_right, 
			right_x1, 1, 
			right_x2, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);

		Text_CopyMemBoxLinearBuffer((uint8_t*)&machine_splash_black_line, 
			right_x2+1, 1, 
			right_x2+1, 7, 
			PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);

		--left_x1;
		--left_x2;
		--right_x1;
		--right_x2;
		
		General_DelayTicks(300);		
	}
}


// Set logo palette, display Foenix logo on screen, display basic about info
// does NOT clear the screen first
void Startup_ShowFoenixLogo(void)
{
	uint8_t*	color[15];	// pointers to 4 bytes that make up each of the 16 colors, but leaving out 0 (black)
	uint8_t*	temp_color;
	uint8_t*	vicky_lut_addr;
	int8_t		i;
	uint8_t		j;
	uint8_t*	logo_color;
	uint8_t		color_loops;
	bool		keep_going = true;

	// set up array of pointers to each color (4 bytes) in our stored lut
	logo_color = &logo_color_lut[0];
	
	for (i = 0; i < 15; i++)
	{
		logo_color += 4;
		color[i] = logo_color;
	}

	// load in our custom logo colors to the text color luts
// 	Sys_SwapIOPage(VICKY_IO_PAGE_REGISTERS);
// 	memcpy((uint8_t*)(TEXT_BACK_LUT), &logo_color_lut, 64);
// 	memcpy((uint8_t*)(TEXT_FORE_LUT), &logo_color_lut, 64);
// 	Sys_RestoreIOPage();
	
	// copy in chars and attrs for the logo
	// logo is 36*45, so draw it at 22, 7
	Text_CopyMemBoxLinearBuffer((uint8_t*)&logo_chars, LOGO_START_COL, LOGO_START_ROW, LOGO_END_COL, LOGO_BOTTOM_ROW, PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_CHAR);
	Text_CopyMemBoxLinearBuffer((uint8_t*)&logo_attrs, LOGO_START_COL, LOGO_START_ROW, LOGO_END_COL, LOGO_BOTTOM_ROW, PARAM_COPY_TO_SCREEN, PARAM_FOR_TEXT_ATTR);

	// show about info
	Startup_ShowAboutInfo();
	
	//vicky_lut_addr = (uint8_t*)(TEXT_FORE_LUT + 60); // start at highest color and go down to color 1 (color 0 already loaded)
	
	// now rotate the colors around a bit for a fun effect
	// start at 2nd highest color (highest is reserved for text, so it doesn't flash)
	color_loops = 0;
	
	while (color_loops < 9 && keep_going == true)
	{
		++color_loops;
		
		for (j = 0; j < 240; j++)
		{
			temp_color = color[0];
			
			for (i = 1; i < 14; i++)
			{
				color[i-1] = color[i];
			}
			
			color[13] = temp_color;
			
			// update actual lut
			Sys_SwapIOPage(VICKY_IO_PAGE_REGISTERS);
			
			vicky_lut_addr = (uint8_t*)(TEXT_FORE_LUT + 4); // skip over black
			
			for (i = 0; i < 14; i++)
			{
				memcpy(vicky_lut_addr, color[i], 4);
				vicky_lut_addr += 4;
			}
		
			Sys_RestoreIOPage();
	
			//General_DelayTicks(120-j/2); // accelerate speed
			General_DelayTicks(4);
			
			if (Kernal_AnyKeyEvent())
			{
				keep_going = false;
				break;
			}			
		}
	}
	
	// reset colors (this is kind of clumsy, but lazy and it works)
	Sys_AutoConfigure();
}


// display information about f/manager, the machine, and the MicroKernel
void Startup_ShowAboutInfo(void)
{
	char 		year[2];
	char		month[2];
	char		day[2];
	char		build[2];
	char*		buffer = (char*)0xE008;
	
	// LOGIC:
	//   Unless f/manager loaded from flash, we don't want to bother user with too much machine/kernel info. 
	//   idea being that on machine power up, we want user to see a splash screen as if it was really the machine showing the results, not just some random app
	//   in all situations we want to show app name/about info
	
	if (global_started_from_flash == true)
	{
		// show machine information	
		Sys_SwapIOPage(VICKY_IO_PAGE_REGISTERS);
		sprintf(global_string_buff1, General_GetString(ID_STR_ABOUT_HARDWARE_DETAILS), CH_MISC_COPY, R8(MACHINE_FPGA_NUM_HI), R8(MACHINE_FPGA_NUM_LOW), R8(MACHINE_FPGA_VER_HI), R8(MACHINE_FPGA_VER_LOW), R8(MACHINE_FPGA_SUBV_HI), R8(MACHINE_FPGA_SUBV_LOW), R8(MACHINE_PCB_MAJOR), R8(MACHINE_PCB_MINOR), R8(MACHINE_PCB_ID_0), R8(MACHINE_PCB_ID_1));
		Sys_RestoreIOPage();
		Text_DrawStringAtXY(0, INFO_MACHINE_DISPLAY_ROW, global_string_buff1, 15, COLOR_BLACK);
		
		// show MicroKernel information	
		// data is (11 bytes), starting 8 bytes into 3f.bin, which happens to be mapped in to $E000 all the time. 
		// format is MM/DD/YY, space, build #. eg: "01/02/24 21"
		//General_Strlcpy(global_string_buff1, (char*)0xE008, 12); 
		month[0] = *buffer++;
		month[1] = *buffer++;
		buffer++; // skip the slash
		day[0] = *buffer++;
		day[1] = *buffer++;
		buffer++; // skip the slash
		year[0] = *buffer++;
		year[1] = *buffer++;
		buffer++; // skip the space
		build[0] = *buffer++;
		build[1] = *buffer++;
		
		strcpy(global_string_buff2, General_GetString(ID_STR_ABOUT_MICROKERNEL));
		sprintf(global_string_buff1, global_string_buff2, 
			CH_MISC_COPY, year[0], year[1], build[0], build[1], year[0], year[1], month[0], month[1], day[0], day[1]
		);
		Text_DrawStringAtXY((80-strlen(global_string_buff1))/2, INFO_KERNEL_DISPLAY_ROW, global_string_buff1, 15, COLOR_BLACK);
		
		// show SuperBASIC info
		sprintf(global_string_buff1, General_GetString(ID_STR_ABOUT_SUPERBASIC), CH_MISC_COPY);
		Text_DrawStringAtXY((80-strlen(global_string_buff1))/2, INFO_SUPERBASIC_DISPLAY_ROW, global_string_buff1, 15, COLOR_BLACK);
	}

	// show app name, version, and credit
	sprintf(global_string_buff1, General_GetString(ID_STR_ABOUT_FMANAGER), CH_MISC_COPY, MAJOR_VERSION, MINOR_VERSION, UPDATE_VERSION);
	Text_DrawStringAtXY((80-strlen(global_string_buff1))/2, INFO_FMANAGER_DISPLAY_ROW, global_string_buff1, 15, COLOR_BLACK);
}



/*****************************************************************************/
/*                        Public Function Definitions                        */
/*****************************************************************************/


// load strings into memory and set up string pointers
void Startup_LoadString(void)
{
	bool		more_to_get = true;
	uint8_t		the_id;
	uint8_t		str_length;
	uint8_t		strings_found = 0;
	uint8_t*	the_buff = (uint8_t*)0xC000;	// mapped to I/O bank Address, but we will map out I/O when this needs to be accessed;

	//DEBUG_OUT(("%s %d: entered", __func__, __LINE__));

	// f256jr:
	//   until load is available, I am going to be side-loading directly into physical memory with the emulator's command line
	//   all strings will be in 1 dedicated ram bank (8k)
	//   for now, rather than read length and id (without putting them in the buffer), I'll be loading the whole file
	//   this function will be about scanning what has already been loaded, and setting up the string pointers, rather than about loading
	
	// OLD NOTE:
	// logic:
	//  - string files are set up as id->len->the string. string len is limited to 255.
	//  - we will read 2 bytes to get id and length
	//  - will then read 'length' worth of bytes into the global_string_buff
	//  - will then write a null on the end of that storage loc.
	//  - will then point the next global_string[] pointer to the starting write addr
	//  - then loop around until all strings read in.

	// map the string buffer into CPU memory space
	zp_bank_num = STRING_STORAGE_VALUE;
	io_bank_value_kernel = Memory_SwapInNewBank(BANK_IO);

	asm("SEI"); // disable interrupts in case some other process has a role here
	Sys_DisableIOBank();

	while (more_to_get && strings_found < NUM_STRINGS)
	{
		the_id = *the_buff;
		//DEBUG_OUT(("%s %d: the_id=%u, the_buff=%p", __func__, __LINE__, the_id, the_buff));
		the_buff[0] = 0;	// overwrite ID spot with a NULL, as separator between strings
		++the_buff;
		
		if (the_id >= NUM_STRINGS)
		{
			more_to_get = false;
			break;
		}

		str_length = *the_buff++;
		//DEBUG_OUT(("%s %d: the_id=%u, len=%u", __func__, __LINE__, the_id, str_length));
		
		// remember where we put this string
		global_string[the_id] = (char*)the_buff;

		// move the read buffer to end of the string just read in
		the_buff += str_length;
		++strings_found;
	}

	// write out a null at end of all strings, to terminate the last one
	++the_buff;
	the_buff[0] = 0;
	
	// prepare for end of map generation mode by re-enabling the I/O page, which unmaps the dungeon map screen from 6502 RAM space
	Sys_DisableIOBank();

	zp_bank_num = io_bank_value_kernel;
	Memory_SwapInNewBank(BANK_IO);

	asm("CLI"); // restore interrupts
}


// clear screen and show app (foenix) logo, and machine logo if running from flash
void Startup_ShowLogo(void)
{
	// clear screen first, as neither logo/splash routine will do that
	Text_ClearScreen(COLOR_BLACK, COLOR_BLACK);
	
	// determine if we started from flash or from disk
	// if from flash, we want to show the machine logo before showing app (foenix) logo
	if (global_started_from_flash == true)
	{
		// we started from disk if $200 has pexec '-' in it on f/manager startup. 
		//  you can also start from DOS with "/- fm", and then / ends up in 200 slot.
		// if from flash, $200 would be 'f', and $201 would be 'm', and $202 would be 0. 
		Startup_ShowMachineSplash();		
	
		// give user a chance to drop into BASIC immediately
		if (Keyboard_GetKeyIfPressed() == 'b')
		{
			Kernal_RunNamed(global_named_app_basic, 5);
		}
	
		General_DelayTicks(10000);
	}

	// show the foenix (app) logo
	Startup_ShowFoenixLogo();
}


// enable the random number generator, and seed it
void Startup_InitializeRandomNumGen(void)
{
	// LOGIC: 
	//   f256jr has a built in random number generator
	//   it works like this:
	//     1) you enable it with bit 0 of RND_CTRL
	//     2) you turn on seed mode by setting bit 1 of RND_CTRL to 1.
	//     3) you populate RNDL and RNDH with a seed
	//     4) you turn off see mode by unsetting bit 1 of RND_CTRL.
	//     5) you get random numbers by reading RNDL and RNDH. every time you read them, it repopulates them. 
	//     6) resulting 16 bit number you divide by 65336 (RAND_MAX_FOENIX) to get a number 0-1. 
	//   I will use the real time clock to seed the number generator
	
	uint8_t		old_rtc_control;
	
	// need to have vicky registers available
	Sys_SwapIOPage(VICKY_IO_PAGE_REGISTERS);
	
	// get mins and seconds from RTC
	old_rtc_control = R8(RTC_CONTROL);
	R8(RTC_CONTROL) = old_rtc_control | 0x08; // stop it from updating external registers
	
	// seed the RNG with time
	R8(RANDOM_NUM_GEN_ENABLE) = 3; // enable and set seed mode
	R8(RANDOM_NUM_GEN_LOW) = R8(RTC_SECONDS);
	R8(RANDOM_NUM_GEN_HI) = R8(RTC_MINUTES);
	R8(RANDOM_NUM_GEN_ENABLE) = 1; // keep enabled, return to generate mode
	
	// restore timer control to what it had been
	R8(RTC_CONTROL) = old_rtc_control;

	Sys_DisableIOBank();
}


// initialize or re-initialize the global dialog box for standard 2-button entry
// some routine may change it temporarily to 3-button format/size
void App_InitializeDialogBox(void)
{
	// set up the dialog template we'll use throughout the app
	global_dlg.x_ = (SCREEN_NUM_COLS - APP_DIALOG_WIDTH)/2;
	global_dlg.y_ = 16;
	global_dlg.width_ = APP_DIALOG_WIDTH;
	global_dlg.height_ = APP_DIALOG_HEIGHT;
	global_dlg.num_buttons_ = APP_DIALOG_STARTING_NUM_BUTTONS;
	global_dlg.title_text_ = global_dlg_title;
	global_dlg.body_text_ = global_dlg_body_msg;
	global_dlg.btn_label_[0] = global_dlg_button[0];
	global_dlg.btn_label_[1] = global_dlg_button[1];
	global_dlg.btn_label_[2] = global_dlg_button[2];
	global_dlg.btn_keycolor_[0] = COLOR_GREEN;
	global_dlg.btn_keycolor_[1] = COLOR_RED;
	global_dlg.btn_keycolor_[2] = COLOR_BLUE;
	global_dlg.btn_shortcut_[0] = 'n';
	global_dlg.btn_shortcut_[1] = 'y';
	global_dlg.default_button_id_ = 1;
	global_dlg.default_button_shortcut_ = CH_ENTER;
	global_dlg.cancel_button_shortcut_ = CH_RUNSTOP;

}


